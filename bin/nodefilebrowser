#!/usr/bin/env node

var fb = require('../lib/index.js');
var argv = require('minimist')(process.argv.slice(2));

console.log("usage: nodefilebrowser [-p port] [path]\n");
var port = argv.p || 6489;
var path = argv._[0] || ".";

var os=require('os');
var ifaces=os.networkInterfaces();
for (var dev in ifaces) {
  var alias=0;
  ifaces[dev].forEach(function(details){
    var eth = (dev+(alias?':'+alias:''));
    if (eth.indexOf('lo') == -1 && details.family == 'IPv4') {
      console.log("Listen on port",eth,details.address+":"+port);
      ++alias;
    }
  });
}


fb.fileBrowser(port, path);
